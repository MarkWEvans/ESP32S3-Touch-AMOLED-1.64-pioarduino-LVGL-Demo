[platformio]
default_envs = amoled164
src_dir = .

[env:amoled164]
; pioarduino platform (Arduino framework)
platform = https://github.com/pioarduino/platform-espressif32/releases/download/stable/platform-espressif32.zip
framework = arduino

; Custom board definition with 8MB flash + 8MB PSRAM (OPI)
board = esp32-s3-touch-amoled-164

monitor_speed = 115200
; Add host-side timestamps to every serial line in `pio device monitor`
monitor_filters = time

; Match the repo's ESP-IDF demo assumptions (see ESP-IDF/06_LVGL_Test/sdkconfig.defaults)
board_build.flash_mode = qio
board_build.flash_size = 16MB
board_build.arduino.memory_type = qio_opi
board_build.partitions = partitions_16mb_12mb_app.csv

; Use standard LVGL from the PlatformIO Registry
lib_deps =
  lvgl/lvgl@8.3.11
  https://github.com/RobTillaart/INA226.git

build_flags =
  ; Mute Arduino core log macros like: [E][esp32-hal-i2c-ng.c:272] ...
  ; (your own Serial.printf logs are unaffected)
  -DCORE_DEBUG_LEVEL=0
  -DLV_CONF_INCLUDE_SIMPLE
  ; Enable USB CDC for Serial output (ESP32-S3)
  -DARDUINO_USB_MODE=1
  -DARDUINO_USB_CDC_ON_BOOT=1
  -Iinclude
  -Iui

; Build SquareLine Studio exported UI sources (root/ui) alongside src/
build_src_filter =
  +<src/>
  +<ui/>


